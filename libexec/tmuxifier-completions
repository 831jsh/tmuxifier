#! /usr/bin/env bash
set -e
[ -n "$TMUXIFIER_DEBUG" ] && set -x

command="$1"
if [ -z "$command" ]; then
  echo "Usage: tmuxifier completions COMMAND [arg1 arg2...]" >&2
  exit 1
fi

command_path="$(command -v "tmuxifier-$command")"
if grep -i "^# provide tmuxifier completions" "$command_path" >/dev/null; then
  shift
  exec "$command_path" --complete "$@"
fi
